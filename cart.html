<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Your Cart</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="wrap">
<header><h1>Your Cart</h1></header>
<div id="cartList"></div>
<div class="total">
<h2>Total</h2>
<div id="cartTotal" class="sum">$0</div>
<button class="btn" id="viewBackBtn">Back to PC Builder</button>
<button class="btn" id="viewCheckoutBtn">Checkout With Paypal</button>
<button class="btn clear" id="clearCartBtn">Clear Cart</button>
</div>
</div>

<script>
const $ = id => document.getElementById(id);

function getCart(){return JSON.parse(localStorage.getItem('cart')||'[]');}
function setCart(c){localStorage.setItem('cart', JSON.stringify(c||[]));}

function renderCart(){
  const cart = getCart();
  const list = $('cartList');
  list.innerHTML = '';
  let sum = 0;
  if(!cart.length) {
    list.innerHTML = '<div class="empty">Your cart is empty.</div>';
    $('cartTotal').textContent = '$0';
    return;
  }
  cart.forEach((c,i)=>{
    const div = document.createElement('div');
    div.className = 'configCard';
    div.innerHTML = `<h3>Configuration ${i+1}</h3>`;
    for(const [k,v] of Object.entries(c)){
      if(k==='estTotal') continue;
      div.innerHTML += `<div class="partRow"><div class="label">${k}</div><div class="value">${v||'â€”'}</div></div>`;
    }
    div.innerHTML += `<div class="partRow"><div class="label">Subtotal</div><div class="price">${c.estTotal||'$0'}</div></div>`;
    list.appendChild(div);
    const val = parseFloat((c.estTotal||'0').replace(/[^\d.]/g,''))||0;
    sum += val;
  });
  $('cartTotal').textContent = '$'+sum.toLocaleString();
}

function clearCart(){setCart([]); renderCart();}
function wire(){
  $('clearCartBtn').addEventListener('click', clearCart);
  $('viewBackBtn').addEventListener('click', ()=>{window.location.href='index.html';});
  $('viewCheckoutBtn').addEventListener('click', ()=>{window.location.href='checkout.html';});
}

renderCart(); wire();
</script>
  <script src="https://www.paypal.com/sdk/js?client-id=AQiioH-DGdsjDiNC50Bt0eKQtejnt4NXpGp_q08Zjg8l67HhaozGl5upZVU6RWUesGYlmqkB8w8n_Hde&currency=USD"></script>\
</body>
</html>
